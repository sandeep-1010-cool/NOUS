# Pulumi: Practical Example and Key Features

## Differentiating Pulumi from Other IaC Tools
Pulumi stands out from traditional Infrastructure as Code (IaC) tools by allowing developers to use general-purpose programming languages instead of domain-specific languages or formats like YAML, JSON, or HCL. This provides flexibility, familiarity, and a more powerful way to define infrastructure.

## Practical Example: Creating Resources in AWS with Pulumi

### Part 1: Installing Python and pip Without Admin Rights (Optional)
If you want to install Python and pip without admin rights using Git Bash on Windows, follow these steps:

#### Step 1: Download Python
1. **Download the Installer**: Visit the [official Python website](https://www.python.org/downloads/) and download the Windows installer for the latest version of Python.
2. **Choose the Executable Installer**: Select the executable installer for Windows.

#### Step 2: Install Python
1. **Run the Installer**: Double-click the downloaded installer to start the installation process.
2. **Select 'Install for me only'**: In the installer window, choose the option that says "Install for me only" to avoid needing admin rights.
3. **Check 'Add Python to PATH'**: Make sure to check the box that says "Add Python to PATH" before clicking "Install Now".

#### Step 3: Verify the Installation in Git Bash
1. **Open Git Bash**: Launch Git Bash from your Start menu or desktop.
2. **Check Python Installation**: Type the following command to verify that Python is installed correctly:
    ```bash
    python --version
    ```
3. **Check pip Installation**: Type the following command to check if pip is installed:
    ```bash
    pip --version
    ```

#### Step 4: Install Pulumi with pip
- Install Pulumi using pip:
  ```bash
  pip install pulumi
  pulumi version
  ```

### Part 2: Setting Up Pulumi Project

#### Step 1: Creating a Pulumi Project
1. Create a new folder for the project.
2. Use the `pulumi new` command to bootstrap the project:
    ```bash
    pulumi new
    ```
3. Select the platform and programming language (e.g., AWS with Node.js/JavaScript).
4. Provide project information such as:
    - Project description
    - Stack name
    - AWS region (e.g., Europe)

#### Step 2: Generated Files
Pulumi initializes the project with boilerplate code:
- **`package.json`**: Includes Pulumi libraries as dependencies.
- **`node_modules`**: Dependencies automatically downloaded.
- **`index.js`**: Starting code with Pulumi core and AWS libraries imported.
- Example code to create an S3 bucket is provided.

#### Step 3: Configuring AWS Credentials
Pulumi connects to AWS using credentials from:
- Default `.aws` folder in the user's directory.
- Environment variables.
- Pulumi-specific configuration methods.
- AWS credentials setup ensures Pulumi can provision resources.

### Part 3: Executing and Extending Pulumi Projects

#### Step 1: Executing the Pulumi Project
- Use the `pulumi up` command to execute the project:
    ```bash
    pulumi up
    ```
- Features of `pulumi up`:
  - **Preview**: Displays the planned changes before execution.
  - **Confirmation**: Prevents accidental destruction of existing infrastructure.
  - **Output**: Displays exported results (e.g., bucket names).

#### Step 2: Extending the Example
- Create multiple buckets using loops:
    ```javascript
    const bucketNames = ["bucket1", "bucket2", "bucket3"];
    const buckets = bucketNames.map(name => new aws.s3.Bucket(name));
    exports.bucketNames = buckets.map(bucket => bucket.bucket);
    ```
- Execute the updated project:
    ```bash
    pulumi up
    ```
- Preview and confirm the changes:
  - Deletes old buckets.
  - Creates new buckets.
  - Outputs an array of bucket names.

#### Step 3: Managing Pulumi State
- Pulumi uses a **state file** to track infrastructure changes:
  - Compares the current state of infrastructure with the desired state defined in the program.
  - Plans changes to achieve the desired state.
- State file storage options:
  - Default: Hosted Pulumi service (managed for you).
  - Custom: S3 bucket, Google Cloud Storage, or local file system (self-managed).

#### Step 4: Additional Features
- **Stack Outputs**:
  - Print outputs separately using:
    ```bash
    pulumi stack output
    ```

## Summary
Pulumi simplifies IaC by leveraging programming languages for defining infrastructure. Key advantages include:
- Familiar syntax and tools for developers.
- Powerful features like loops and conditionals.
- Managed or configurable state tracking.
- Support for multiple platforms (AWS, Azure, Google Cloud, Kubernetes).
Pulumi enables efficient and flexible infrastructure management, making it a strong choice for modern DevOps practices.
